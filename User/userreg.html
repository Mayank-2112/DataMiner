<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration Page</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
    integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
  
    <link rel="stylesheet" href="userreg.css">
</head>
<body>
    <div class="container" id="register_portal">
        <div class="con2">
            <h1>User Registration</h1>
            <div class="detailsec">
                <p>Already have account ?  <a href="sign.html" id="login">Sign In </a></p>
            <div id="form">
                <label for="name" id="nlabel">Name</label> <br>
                <input type="text" id="fname" placeholder="Lucifer Henry " autocomplete="off"> <br>
				        <label for="phone" id="plabel">Phone no.</label> <br>
                <input type="phone" id="ephone" placeholder="12*****9" autocomplete="off"> <br>
                <label for="email" id="elabel">Email</label> <br>
                <input type="email" id="eemail" placeholder="Lucifer@gmail.com" autocomplete="off"> <br>
                 <label for="password" id="plabel">Password</label> <br>
                <input type="password" name="password" id="l2password"> <br><center>
                <button value="sign Up" id="btn">Sign Up </button></center>
               </div>
            
            </div>
        </div>
    </div>
</body>
<script type="module">
    
    // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getDatabase,set,ref } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
  import { getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js"


  const firebaseConfig_Dataminer = {
    apiKey: "AIzaSyDOOwSq6c0x0DQrQe0gm8m8ikqGZ_nZST4",
    authDomain: "dataminer-a8d2c.firebaseapp.com",
    projectId: "dataminer-a8d2c",
    databaseURL:"https://dataminer-a8d2c-default-rtdb.firebaseio.com/",
    storageBucket: "dataminer-a8d2c.appspot.com",
    messagingSenderId: "390561026587",
    appId: "1:390561026587:web:0ba2c058c468ba1caf9ebe",
    measurementId: "G-RZVWQ59TNK"
  };

  // Initialize Firebase
  const app_Dataminer = initializeApp(firebaseConfig_Dataminer);
  const database = getDatabase(app_Dataminer);
  const auth_Dataminer = getAuth();
    
   let name=document.getElementById('fname');
    let phone=document.getElementById('ephone');
    let email=document.getElementById('eemail');
    let password=document.getElementById('l2password');
    let signup=document.getElementById('btn');
    
    function InsertData(){
      set(ref(database,"users/"+phone.value),{
      Name:name.value,
      Phone:phone.value,
      Email:email.value,
      })
      .then(()=>{
        alert("registration successfully");
      })
      .catch((error)=>{
        alert("unsuccessful,error"+error);
      });
    }
    signup.addEventListener('click',InsertData);
    

document.getElementById("btn").addEventListener('click',function() {
    let email=document.getElementById('eemail').value; 
    let password=document.getElementById('l2password').value;
    createUserWithEmailAndPassword(auth_Dataminer, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;

    //alert('user created');
    setTimeout(function(){
                window.location.replace("/MS Excel/excel.html")
            }, 1000);
          })
    // ...
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;

    //alert('errorMessage');
    // ..
  });
});
  </script>


</html>
